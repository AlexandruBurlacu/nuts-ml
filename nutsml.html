<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>nutsml package &#8212; nutsml 1.0.6 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Configuration" href="tutorial/configuration.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="nutsml-package">
<h1>nutsml package<a class="headerlink" href="#nutsml-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-nutsml.batcher">
<span id="nutsml-batcher-module"></span><h2>nutsml.batcher module<a class="headerlink" href="#module-nutsml.batcher" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-batcher"></span><dl class="class">
<dt id="nutsml.batcher.BuildBatch">
<em class="property">class </em><code class="descname">BuildBatch</code><span class="sig-paren">(</span><em>batchsize</em>, <em>prefetch=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/batcher.html#BuildBatch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.batcher.BuildBatch" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">nutsflow.base.Nut</span></code></p>
<p>Build batches for GPU-based neural network training.</p>
<dl class="method">
<dt id="nutsml.batcher.BuildBatch.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>batchsize</em>, <em>prefetch=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/batcher.html#BuildBatch.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.batcher.BuildBatch.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>iterable &gt;&gt; BuildBatch(batchsize, prefetch=1)</p>
<p>Take samples in interable, extract specified columns, convert
column data to numpy arrays of various types, aggregate converted
samples into a batch.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nutsflow</span> <span class="k">import</span> <span class="n">Collect</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mf">4.1</span><span class="p">,</span> <span class="mf">3.2</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">images</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">)),</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span> <span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">))]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">class_ids</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">samples</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">numbers</span><span class="p">,</span> <span class="n">images</span><span class="p">,</span> <span class="n">class_ids</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">build_batch</span> <span class="o">=</span> <span class="p">(</span><span class="n">BuildBatch</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">... </span>               <span class="o">.</span><span class="n">by</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;number&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
<span class="gp">... </span>               <span class="o">.</span><span class="n">by</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="gp">... </span>               <span class="o">.</span><span class="n">by</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;one_hot&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">batches</span> <span class="o">=</span> <span class="n">samples</span> <span class="o">&gt;&gt;</span> <span class="n">build_batch</span> <span class="o">&gt;&gt;</span> <span class="n">Collect</span><span class="p">()</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>batchsize</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Size of batch = number of rows in batch.
Number of columns is determined by colspec.</li>
<li><strong>prefetch</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Number of batches to prefetch. This speeds up
GPU based training.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nutsml.batcher.BuildBatch.__rrshift__">
<code class="descname">__rrshift__</code><span class="sig-paren">(</span><em>iterable</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/batcher.html#BuildBatch.__rrshift__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.batcher.BuildBatch.__rrshift__" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert samples in iterable into mini-batches.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>iterable</strong> (<em>iterable</em>) &#8211; Iterable over samples.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Mini-batches</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">list of np.array</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nutsml.batcher.BuildBatch.by">
<code class="descname">by</code><span class="sig-paren">(</span><em>col</em>, <em>name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/batcher.html#BuildBatch.by"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.batcher.BuildBatch.by" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify and add batch columns to create</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>col</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; column of the sample to extract and to create a
batch column from.</li>
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) &#8211; Name of the column function to apply to create
a batch column, e.g. &#8216;image&#8217;
See the following functions for more details:
&#8216;image&#8217;: nutsflow.batcher.build_image_batch
&#8216;number&#8217;: nutsflow.batcher.build_number_batch
&#8216;vector&#8217;: nutsflow.batcher.build_vector_batch
&#8216;one_hot&#8217;: nutsflow.batcher.build_one_hot_batch</li>
<li><strong>args</strong> (<em>args</em>) &#8211; Arguments for column function, e.g. dtype</li>
<li><strong>kwargs</strong> (<em>kwargs</em>) &#8211; Keyword arguments for column function</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">instance of BuildBatch</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#nutsml.batcher.BuildBatch" title="nutsml.batcher.BuildBatch">BuildBatch</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="nutsml.batcher.build_image_batch">
<code class="descname">build_image_batch</code><span class="sig-paren">(</span><em>images</em>, <em>dtype</em>, <em>channelfirst=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/batcher.html#build_image_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.batcher.build_image_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Return batch of images.</p>
<p>If images have no channel a channel axis is added. For channelfirst=True
it will be added/moved to front otherwise the channel comes last.
All images in batch will have a channel axis. Batch is of shape
(n, c, h, w) or (n, h, w, c) depending on channelfirst, where n is
the number of images in the batch.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">datautil</span> <span class="k">import</span> <span class="n">shapestr</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">images</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)),</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">batch</span> <span class="o">=</span> <span class="n">build_image_batch</span><span class="p">(</span><span class="n">images</span><span class="p">,</span> <span class="s1">&#39;uint8&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">shapestr</span><span class="p">(</span><span class="n">batch</span><span class="p">)</span>
<span class="go">&#39;2x1x2x3&#39;</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">batch</span>
<span class="go">array([[[[0, 0, 0],</span>
<span class="go">         [0, 0, 0]]],</span>


<span class="go">       [[[1, 1, 1],</span>
<span class="go">         [1, 1, 1]]]], dtype=uint8)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>array images</strong> (<em>numpy</em>) &#8211; Images to batch. Must be of shape (w,h,c)
or (w,h). Gray-scale with channel is fine (w,h,1) and also
alpha channel is fine (w,h,4).</li>
<li><strong>data type dtype</strong> (<em>numpy</em>) &#8211; Data type of batch, e.g. &#8216;uint8&#8217;</li>
<li><strong>channelfirst</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; If True, channel is added/moved to front.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Image batch with shape (n, c, h, w) or (n, h, w, c).</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">np.array</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.batcher.build_number_batch">
<code class="descname">build_number_batch</code><span class="sig-paren">(</span><em>numbers</em>, <em>dtype</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/batcher.html#build_number_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.batcher.build_number_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Return numpy array with given dtype for given numbers.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">build_number_batch</span><span class="p">(</span><span class="n">numbers</span><span class="p">,</span> <span class="s1">&#39;uint8&#39;</span><span class="p">)</span>
<span class="go">array([1, 2, 3, 1], dtype=uint8)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>number numbers</strong> (<em>iterable</em>) &#8211; Numbers to create batch from</li>
<li><strong>data type dtype</strong> (<em>numpy</em>) &#8211; Data type of batch, e.g. &#8216;uint8&#8217;</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Numpy array for numbers</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy.array</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.batcher.build_one_hot_batch">
<code class="descname">build_one_hot_batch</code><span class="sig-paren">(</span><em>class_ids</em>, <em>dtype</em>, <em>num_classes</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/batcher.html#build_one_hot_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.batcher.build_one_hot_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Return one hot vectors for class ids.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">class_ids</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">build_one_hot_batch</span><span class="p">(</span><span class="n">class_ids</span><span class="p">,</span> <span class="s1">&#39;uint8&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">array([[1, 0, 0],</span>
<span class="go">       [0, 1, 0],</span>
<span class="go">       [0, 0, 1],</span>
<span class="go">       [0, 1, 0]], dtype=uint8)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>class_ids</strong> (<em>iterable</em>) &#8211; Class indices in {0, ..., num_classes-1}</li>
<li><strong>data type dtype</strong> (<em>numpy</em>) &#8211; Data type of batch, e.g. &#8216;uint8&#8217;</li>
<li><strong>num_classes</strong> &#8211; Number of classes</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">One hot vectors for class ids.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy.array</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.batcher.build_vector_batch">
<code class="descname">build_vector_batch</code><span class="sig-paren">(</span><em>vectors</em>, <em>dtype</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/batcher.html#build_vector_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.batcher.build_vector_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Return batch of vectors.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">datautil</span> <span class="k">import</span> <span class="n">shapestr</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vectors</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">batch</span> <span class="o">=</span> <span class="n">build_vector_batch</span><span class="p">(</span><span class="n">vectors</span><span class="p">,</span> <span class="s1">&#39;uint8&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">shapestr</span><span class="p">(</span><span class="n">batch</span><span class="p">)</span>
<span class="go">&#39;2x3&#39;</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">batch</span>
<span class="go">array([[1, 2, 3],</span>
<span class="go">       [2, 3, 4]], dtype=uint8)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>row_vectors</strong> (<em>iterable</em>) &#8211; Numpy row vectors</li>
<li><strong>data type dtype</strong> (<em>numpy</em>) &#8211; Data type of batch, e.g. &#8216;uint8&#8217;</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">vstack of vectors</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy.array</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-nutsml.booster">
<span id="nutsml-booster-module"></span><h2>nutsml.booster module<a class="headerlink" href="#module-nutsml.booster" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-booster"></span><dl class="function">
<dt id="nutsml.booster.random">
<code class="descname">random</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &rarr; x in the interval [0, 1).<a class="headerlink" href="#nutsml.booster.random" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-nutsml.common">
<span id="nutsml-common-module"></span><h2>nutsml.common module<a class="headerlink" href="#module-nutsml.common" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-common"></span></div>
<div class="section" id="module-nutsml.config">
<span id="nutsml-config-module"></span><h2>nutsml.config module<a class="headerlink" href="#module-nutsml.config" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-config"></span><dl class="function">
<dt id="nutsml.config.load_config">
<code class="descname">load_config</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/config.html#load_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.config.load_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Load configuration file in YAML format.</p>
<p>The search order for the config file is:
1) user home dir
2) current dir
3) full path</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="s1">&#39;tests/data/config.yaml&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span><span class="o">.</span><span class="n">filepath</span>
<span class="go">&#39;c:/Maet&#39;</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;imagesize&#39;</span><span class="p">]</span>
<span class="go">[100, 200]</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> &#8211; Name or fullpath of configuration file.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">dictionary with config data. Note that config data can be
accessed by key or attribute, e.g. cfg.filepath or cfg.[&#8216;filepath&#8217;]</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#nutsml.datautil.AttributeDict" title="nutsml.datautil.AttributeDict">AttributeDict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-nutsml.datautil">
<span id="nutsml-datautil-module"></span><h2>nutsml.datautil module<a class="headerlink" href="#module-nutsml.datautil" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-datautil"></span><dl class="class">
<dt id="nutsml.datautil.AttributeDict">
<em class="property">class </em><code class="descname">AttributeDict</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/datautil.html#AttributeDict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.datautil.AttributeDict" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2/library/stdtypes.html#dict" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">dict</span></code></a></p>
<p>Dictionary that allows access via keys or attributes.</p>
<dl class="method">
<dt id="nutsml.datautil.AttributeDict.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/datautil.html#AttributeDict.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.datautil.AttributeDict.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create dictionary.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contact</span> <span class="o">=</span> <span class="n">AttributeDict</span><span class="p">({</span><span class="s1">&#39;age&#39;</span><span class="p">:</span><span class="mi">13</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;stefan&#39;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contact</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">]</span>
<span class="go">13</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contact</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;stefan&#39;</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>args</strong> &#8211; See dict</li>
<li><strong>kwargs</strong> &#8211; See dict</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="nutsml.datautil.col_map">
<code class="descname">col_map</code><span class="sig-paren">(</span><em>sample</em>, <em>columns</em>, <em>func</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/datautil.html#col_map"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.datautil.col_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Map function to given columns of sample and keep other columns</p>
<p>&gt;&gt; sample = (1, 2, 3)
&gt;&gt; add_n = lambda x, n: x + n
&gt;&gt; col_map(sample, 1, add_n, 10)
(1, 12, 3)</p>
<p>&gt;&gt; col_map(sample, (0, 2), add_n, 10)
(11, 2, 13)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>sample</strong> (<em>tuple|list</em>) &#8211; Sample</li>
<li><strong>columns</strong> (<em>int|tuple</em>) &#8211; Single or multiple column indices.</li>
<li><strong>func</strong> (<em>function</em>) &#8211; Function to map</li>
<li><strong>args</strong> (<em>args</em>) &#8211; Arguments passed on to function</li>
<li><strong>kwargs</strong> (<em>kwargs</em>) &#8211; Keyword arguments passed on to function</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Sample where function has been applied to elements in the given
columns.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.datautil.group_by">
<code class="descname">group_by</code><span class="sig-paren">(</span><em>elements</em>, <em>keyfunc</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/datautil.html#group_by"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.datautil.group_by" title="Permalink to this definition">¶</a></dt>
<dd><p>Group elements using the given key function.</p>
<p>&gt;&gt; is_odd = lambda x: bool(x % 2)
&gt;&gt; numbers = [0, 1, 2, 3, 4]
&gt;&gt; group_by(numbers, is_odd)
{False: [0, 2, 4], True: [1, 3]}</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>elements</strong> (<em>iterable</em>) &#8211; Any iterable</li>
<li><strong>keyfunc</strong> (<em>function</em>) &#8211; Function that returns key to group by</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">dictionary with results of keyfunc as keys and the elements
for that key as value</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/2/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.datautil.group_samples">
<code class="descname">group_samples</code><span class="sig-paren">(</span><em>samples</em>, <em>labelcol</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/datautil.html#group_samples"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.datautil.group_samples" title="Permalink to this definition">¶</a></dt>
<dd><p>Return samples grouped by label and label counts.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">samples</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;pos&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;pos&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;neg&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">groups</span><span class="p">,</span> <span class="n">labelcnts</span> <span class="o">=</span> <span class="n">group_samples</span><span class="p">(</span><span class="n">samples</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">groups</span>
<span class="go">{0: [(&#39;neg&#39;, 0)], 1: [(&#39;pos&#39;, 1), (&#39;pos&#39;, 1)]}</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">labelcnts</span>
<span class="go">Counter({1: 2, 0: 1})</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>samples</strong> (<em>iterable</em>) &#8211; Iterable of samples where each sample has a
label at a fixed position (labelcol)</li>
<li><strong>labelcol</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Index of label in sample</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">(groups, labelcnts) where groups is a dict containing
samples grouped by label, and labelcnts is a Counter dict
containing label frequencies.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)">tuple</a>(<a class="reference external" href="https://docs.python.org/2/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a>, Counter)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.datautil.isnan">
<code class="descname">isnan</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/datautil.html#isnan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.datautil.isnan" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if something is NaN.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isnan</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">NaN</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">isnan</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>x</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(in Python v2.7)"><em>object</em></a>) &#8211; Any object</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">True if x is NaN</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)">bool</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.datautil.random_downsample">
<code class="descname">random_downsample</code><span class="sig-paren">(</span><em>samples</em>, <em>labelcol</em>, <em>rand=&lt;random.Random object at 0x00000000099C4AA8&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/datautil.html#random_downsample"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.datautil.random_downsample" title="Permalink to this definition">¶</a></dt>
<dd><p>Randomly down-sample samples.</p>
<p>Creates stratified samples by down-sampling larger classes to the size of
the smallest class.</p>
<p>Note: The example shown below uses rnd.Random(i) to create a deterministic
sequence of randomly stratified samples. Usually it is sufficient to use
the default (rand=rnd.Random(None)). Do NOT use rnd.Random(0) since this
will generate the same subsample every time.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">random</span> <span class="k">as</span> <span class="nn">rnd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">samples</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;pos1&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;pos2&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;pos3&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>           <span class="p">(</span><span class="s1">&#39;neg1&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;neg2&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span> <span class="n">random_downsample</span><span class="p">(</span><span class="n">samples</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">rand</span><span class="o">=</span><span class="n">rnd</span><span class="o">.</span><span class="n">Random</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
<span class="go">[(&#39;neg2&#39;, 0), (&#39;neg1&#39;, 0), (&#39;pos2&#39;, 1), (&#39;pos1&#39;, 1)]</span>
<span class="go">[(&#39;neg1&#39;, 0), (&#39;neg2&#39;, 0), (&#39;pos3&#39;, 1), (&#39;pos1&#39;, 1)]</span>
<span class="go">[(&#39;neg2&#39;, 0), (&#39;neg1&#39;, 0), (&#39;pos1&#39;, 1), (&#39;pos3&#39;, 1)]</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>samples</strong> (<em>iterable</em>) &#8211; Iterable of samples where each sample has a
label at a fixed position (labelcol). Labels can by any hashable type,
e.g. int, str, bool</li>
<li><strong>labelcol</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Index of label in sample</li>
<li><strong>rand</strong> (<em>random.Random</em>) &#8211; Random number generator.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Stratified sample set.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list of samples</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.datautil.shapestr">
<code class="descname">shapestr</code><span class="sig-paren">(</span><em>array</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/datautil.html#shapestr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.datautil.shapestr" title="Permalink to this definition">¶</a></dt>
<dd><p>Return string representation of array shape.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">shapestr</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">&#39;3x4&#39;</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>array</strong> (<em>ndarray</em>) &#8211; Numpy array</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Shape as string, e.g shape (3,4) becomes 3x4</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)">str</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.datautil.upsample">
<code class="descname">upsample</code><span class="sig-paren">(</span><em>samples</em>, <em>labelcol</em>, <em>rand=&lt;random.Random object at 0x00000000096B25B8&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/datautil.html#upsample"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.datautil.upsample" title="Permalink to this definition">¶</a></dt>
<dd><p>Up-sample sample set.</p>
<p>Creates stratified samples by up-sampling smaller classes to the size of
the largest class.</p>
<p>Note: The example shown below uses rnd.Random(i) to create a deterministic
sequence of randomly stratified samples. Usually it is sufficient to use
the default (rand=rnd.Random(None)).</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">random</span> <span class="k">as</span> <span class="nn">rnd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">samples</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;pos1&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;pos2&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;neg1&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span> <span class="n">upsample</span><span class="p">(</span><span class="n">samples</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">rand</span><span class="o">=</span><span class="n">rnd</span><span class="o">.</span><span class="n">Random</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
<span class="go">[(&#39;neg1&#39;, 0), (&#39;neg1&#39;, 0), (&#39;pos1&#39;, 1), (&#39;pos2&#39;, 1)]</span>
<span class="go">[(&#39;pos2&#39;, 1), (&#39;neg1&#39;, 0), (&#39;pos1&#39;, 1), (&#39;neg1&#39;, 0)]</span>
<span class="go">[(&#39;neg1&#39;, 0), (&#39;neg1&#39;, 0), (&#39;pos1&#39;, 1), (&#39;pos2&#39;, 1)]</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>samples</strong> (<em>iterable</em>) &#8211; Iterable of samples where each sample has a
label at a fixed position (labelcol). Labels can by any hashable type,
e.g. int, str, bool</li>
<li><strong>labelcol</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Index of label in sample</li>
<li><strong>rand</strong> (<em>random.Random</em>) &#8211; Random number generator.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Stratified sample set.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list of samples</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-nutsml.imageutil">
<span id="nutsml-imageutil-module"></span><h2>nutsml.imageutil module<a class="headerlink" href="#module-nutsml.imageutil" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-imageutil"></span><dl class="function">
<dt id="nutsml.imageutil.add_channel">
<code class="descname">add_channel</code><span class="sig-paren">(</span><em>image</em>, <em>channelfirst</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#add_channel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.add_channel" title="Permalink to this definition">¶</a></dt>
<dd><p>Add channel if missing and make first axis if requested.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">image</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">image</span> <span class="o">=</span> <span class="n">add_channel</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">shapestr</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
<span class="go">&#39;1x10x20&#39;</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>image</strong> (<em>ndarray</em>) &#8211; RBG (h,w,3) or gray-scale image (h,w).</li>
<li><strong>channelfirst</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; If True, make channel first axis</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Numpy array with channel (as first axis if makefirst=True)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy.array</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.annotation2coords">
<code class="descname">annotation2coords</code><span class="sig-paren">(</span><em>image</em>, <em>annotation</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#annotation2coords"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.annotation2coords" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert geometric annotation in image to pixel coordinates.</p>
<p>For example, given a rectangular region annotated in an image as
(&#8216;rect&#8217;, ((x, y, w, h))) the function returns the coordinates of all pixels
within this region as (row, col) position tuples.</p>
<p>The following annotation formats are supported:
(&#8216;point&#8217;, ((x, y), ... ))
(&#8216;circle&#8217;, ((x, y, r), ...))
(&#8216;rect&#8217;, ((x, y, w, h), ...))
(&#8216;polyline&#8217;, (((x, y), (x, y), ...), ...))</p>
<p>Annotation regions can exceed the image dimensions and will be clipped.
Note that annotation is in x,y order while output is r,c (row, col).</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;uint8&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">anno</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;point&#39;</span><span class="p">,</span> <span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">rr</span><span class="p">,</span> <span class="n">cc</span> <span class="ow">in</span> <span class="n">annotation2coords</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">anno</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span> <span class="n">rr</span><span class="p">,</span> <span class="n">cc</span>
<span class="go">[1] [1]</span>
<span class="go">[2] [1]</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>image</strong> (<em>ndarray</em>) &#8211; Image</li>
<li><strong>annotation</strong> (<em>annotation</em>) &#8211; Annotation of an image region such as
point, circle, rect or polyline</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Coordinates of pixels within the (clipped) region.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">generator over tuples (row, col)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.annotation2mask">
<code class="descname">annotation2mask</code><span class="sig-paren">(</span><em>image</em>, <em>annotations</em>, <em>pos=255</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#annotation2mask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.annotation2mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert geometric annotation to mask.</p>
<p>For annotation formats see:
imageutil.annotation2coords</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;uint8&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">anno</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;point&#39;</span><span class="p">,</span> <span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">annotation2mask</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">anno</span><span class="p">)</span>
<span class="go">array([[  0,   0, 255],</span>
<span class="go">       [255,   0,   0],</span>
<span class="go">       [  0,   0,   0]], dtype=uint8)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>annotation</strong> (<em>annotation</em>) &#8211; Annotation of an image region such as
point, circle, rect or polyline</li>
<li><strong>pos</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Value to write in mask for regions defined by annotation</li>
<li><strong>array image</strong> (<em>numpy</em>) &#8211; Image annotation refers to.
Returned mask will be of same size.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Mask with annotation</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy array</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.annotation2pltpatch">
<code class="descname">annotation2pltpatch</code><span class="sig-paren">(</span><em>annotation</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#annotation2pltpatch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.annotation2pltpatch" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert geometric annotation to matplotlib geometric objects (=patches)</p>
<p>For details regarding matplotlib patches see:
<a class="reference external" href="http://matplotlib.org/api/patches_api.html">http://matplotlib.org/api/patches_api.html</a>
For annotation formats see:
imageutil.annotation2coords</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>annotation</strong> (<em>annotation</em>) &#8211; Annotation of an image region such as
point, circle, rect or polyline</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">matplotlib.patches</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">generator over matplotlib patches</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.arr_to_pil">
<code class="descname">arr_to_pil</code><span class="sig-paren">(</span><em>image</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#arr_to_pil"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.arr_to_pil" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert numpy array to PIL image.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rgb_arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;uint8&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pil_img</span> <span class="o">=</span> <span class="n">arr_to_pil</span><span class="p">(</span><span class="n">rgb_arr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pil_img</span><span class="o">.</span><span class="n">size</span>
<span class="go">(4, 5)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>image</strong> (<em>ndarray</em>) &#8211; Numpy array with dtype &#8216;uint8&#8217; and dimensions
(h,w,c) for RGB or (h,w) for gray-scale images.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">PIL image</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">PIL.Image</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.centers_inside">
<code class="descname">centers_inside</code><span class="sig-paren">(</span><em>centers</em>, <em>image</em>, <em>pshape</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#centers_inside"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.centers_inside" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter center points of patches ensuring that patch is inside of image.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">centers</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">image</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">centers_inside</span><span class="p">(</span><span class="n">centers</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;uint8&#39;</span><span class="p">)</span>
<span class="go">array([[1, 2]], dtype=uint8)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>centers</strong> (<em>ndarray</em><em>(</em><em>n</em><em>,</em><em>2</em><em>)</em><em></em>) &#8211; Center points of patches.</li>
<li><strong>image</strong> (<em>ndarray</em><em>(</em><em>h</em><em>,</em><em>w</em><em>)</em><em></em>) &#8211; Image the patches should be inside.</li>
<li><strong>pshape</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) &#8211; Patch shape of form (h,w)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Patch centers where the patch is completely inside the image.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">ndarray of shape (n, 2)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.change_brightness">
<code class="descname">change_brightness</code><span class="sig-paren">(</span><em>image</em>, <em>brightness=1.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#change_brightness"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.change_brightness" title="Permalink to this definition">¶</a></dt>
<dd><p>Change brightness of image.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">image</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;uint8&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="mi">255</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">change_brightness</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="go">array([[127,   0,   0],</span>
<span class="go">       [  0, 127,   0],</span>
<span class="go">       [  0,   0, 127]], dtype=uint8)</span>
</pre></div>
</div>
<p>See
<a class="reference external" href="http://pillow.readthedocs.io/en/3.1.x/reference/ImageEnhance.html#PIL.ImageEnhance.Brightness">http://pillow.readthedocs.io/en/3.1.x/reference/ImageEnhance.html#PIL.ImageEnhance.Brightness</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>array image</strong> (<em>numpy</em>) &#8211; Numpy array with range [0,255] and dtype &#8216;uint8&#8217;.</li>
<li><strong>brightness</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Brightness [0, 1]</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Image with changed brightness</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy array with range [0,255] and dtype &#8216;uint8&#8217;</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.change_color">
<code class="descname">change_color</code><span class="sig-paren">(</span><em>image</em>, <em>color=1.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#change_color"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.change_color" title="Permalink to this definition">¶</a></dt>
<dd><p>Change color of image.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">image</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;uint8&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="mi">255</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">change_color</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="go">array([[255,   0,   0],</span>
<span class="go">       [  0, 255,   0],</span>
<span class="go">       [  0,   0, 255]], dtype=uint8)</span>
</pre></div>
</div>
<p>See
<a class="reference external" href="http://pillow.readthedocs.io/en/3.1.x/reference/ImageEnhance.html#PIL.ImageEnhance.Color">http://pillow.readthedocs.io/en/3.1.x/reference/ImageEnhance.html#PIL.ImageEnhance.Color</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>array image</strong> (<em>numpy</em>) &#8211; Numpy array with range [0,255] and dtype &#8216;uint8&#8217;.</li>
<li><strong>color</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Color [0, 1]</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Image with changed color</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy array with range [0,255] and dtype &#8216;uint8&#8217;</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.change_contrast">
<code class="descname">change_contrast</code><span class="sig-paren">(</span><em>image</em>, <em>contrast=1.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#change_contrast"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.change_contrast" title="Permalink to this definition">¶</a></dt>
<dd><p>Change contrast of image.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">image</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;uint8&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="mi">255</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">change_contrast</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="go">array([[170,  42,  42],</span>
<span class="go">       [ 42, 170,  42],</span>
<span class="go">       [ 42,  42, 170]], dtype=uint8)</span>
</pre></div>
</div>
<p>See
<a class="reference external" href="http://pillow.readthedocs.io/en/3.1.x/reference/ImageEnhance.html#PIL.ImageEnhance.Contrast">http://pillow.readthedocs.io/en/3.1.x/reference/ImageEnhance.html#PIL.ImageEnhance.Contrast</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>array image</strong> (<em>numpy</em>) &#8211; Numpy array with range [0,255] and dtype &#8216;uint8&#8217;.</li>
<li><strong>contrast</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Contrast [0, 1]</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Image with changed contrast</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy array with range [0,255] and dtype &#8216;uint8&#8217;</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.change_sharpness">
<code class="descname">change_sharpness</code><span class="sig-paren">(</span><em>image</em>, <em>sharpness=1.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#change_sharpness"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.change_sharpness" title="Permalink to this definition">¶</a></dt>
<dd><p>Change sharpness of image.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">image</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;uint8&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="mi">255</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">change_sharpness</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="go">array([[255,   0,   0],</span>
<span class="go">       [  0, 196,   0],</span>
<span class="go">       [  0,   0, 255]], dtype=uint8)</span>
</pre></div>
</div>
<p>See
<a class="reference external" href="http://pillow.readthedocs.io/en/3.1.x/reference/ImageEnhance.html#PIL.ImageEnhance.Sharpness">http://pillow.readthedocs.io/en/3.1.x/reference/ImageEnhance.html#PIL.ImageEnhance.Sharpness</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>array image</strong> (<em>numpy</em>) &#8211; Numpy array with range [0,255] and dtype &#8216;uint8&#8217;.</li>
<li><strong>sharpness</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Sharpness [0, ...]</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Image with changed sharpness</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy array with range [0,255] and dtype &#8216;uint8&#8217;</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.crop">
<code class="descname">crop</code><span class="sig-paren">(</span><em>image</em>, <em>x1</em>, <em>y1</em>, <em>x2</em>, <em>y2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#crop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.crop" title="Permalink to this definition">¶</a></dt>
<dd><p>Crop image.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">image</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;uint8&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">crop</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="go">array([[ 9, 10, 11],</span>
<span class="go">       [13, 14, 15]], dtype=uint8)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>array image</strong> (<em>numpy</em>) &#8211; Numpy array.</li>
<li><strong>x1</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; x-coordinate of left upper corner of crop (inclusive)</li>
<li><strong>y1</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; y-coordinate of left upper corner of crop (inclusive)</li>
<li><strong>x2</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; x-coordinate of right lower corner of crop (exclusive)</li>
<li><strong>y2</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; y-coordinate of right lower corner of crop (exclusive)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Cropped image</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy array</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.crop_center">
<code class="descname">crop_center</code><span class="sig-paren">(</span><em>image</em>, <em>w</em>, <em>h</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#crop_center"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.crop_center" title="Permalink to this definition">¶</a></dt>
<dd><p>Crop region with size w, h from center of image.</p>
<p>Note that the crop is specified via W, h and not via shape (h,w).
Furthermore if the image or the crop region have even dimensions,
coordinates are rounded down.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">image</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;uint8&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">crop_center</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">array([[ 4,  5,  6],</span>
<span class="go">       [ 8,  9, 10]], dtype=uint8)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>array image</strong> (<em>numpy</em>) &#8211; Numpy array.</li>
<li><strong>w</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Width of crop</li>
<li><strong>h</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Height of crop</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Cropped image</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first">numpy array</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raise:</th><td class="field-body"><p class="first last">ValueError if image is smaller than crop region</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.enhance">
<code class="descname">enhance</code><span class="sig-paren">(</span><em>image</em>, <em>func</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#enhance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.enhance" title="Permalink to this definition">¶</a></dt>
<dd><p>Enhance image using a PIL enhance function</p>
<p>See the following link for details on PIL enhance functions:
<a class="reference external" href="http://pillow.readthedocs.io/en/3.1.x/reference/ImageEnhance.html">http://pillow.readthedocs.io/en/3.1.x/reference/ImageEnhance.html</a></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">PIL.ImageEnhance</span> <span class="k">import</span> <span class="n">Brightness</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">image</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;uint8&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">enhance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">Brightness</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
<span class="go">array([[0, 0],</span>
<span class="go">       [0, 0],</span>
<span class="go">       [0, 0]], dtype=uint8)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>array image</strong> (<em>numpy</em>) &#8211; Numpy array with range [0,255] and dtype &#8216;uint8&#8217;.</li>
<li><strong>func</strong> (<em>function</em>) &#8211; PIL ImageEnhance function</li>
<li><strong>args</strong> (<em>args</em>) &#8211; Argument list passed on to enhance function.</li>
<li><strong>kwargs</strong> (<em>kwargs</em>) &#8211; Key-word arguments passed on to enhance function</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Enhanced image</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy array with range [0,255] and dtype &#8216;uint8&#8217;</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.extract_patch">
<code class="descname">extract_patch</code><span class="sig-paren">(</span><em>image</em>, <em>pshape</em>, <em>r</em>, <em>c</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#extract_patch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.extract_patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract a patch of given shape, centered at r,c of given shape from image.</p>
<p>Note that there is no checking if the patch region is inside the image.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">image</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;uint8&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">extract_patch</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">array([[ 5,  6,  7],</span>
<span class="go">       [ 9, 10, 11]], dtype=uint8)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>array image</strong> (<em>numpy</em>) &#8211; Numpy array with range [0,255] and dtype &#8216;uint8&#8217;.
Can be of shapes MxN, MxNxC.</li>
<li><strong>pshape</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) &#8211; Shape of patch. #Dimensions must match image.</li>
<li><strong>r</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Row for center of patch</li>
<li><strong>c</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Column for center of patch</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">numpy array with shape pshape</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy array with range [0,255] and dtype &#8216;uint8&#8217;</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.fliplr">
<code class="descname">fliplr</code><span class="sig-paren">(</span><em>image</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#fliplr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.fliplr" title="Permalink to this definition">¶</a></dt>
<dd><p>Flip image left to right.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">image</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;uint8&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fliplr</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
<span class="go">array([[1, 0],</span>
<span class="go">       [3, 2]], dtype=uint8)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>array image</strong> (<em>numpy</em>) &#8211; Numpy array with range [0,255] and dtype &#8216;uint8&#8217;.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Flipped image</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">numpy array with range [0,255] and dtype &#8216;uint8&#8217;</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.flipud">
<code class="descname">flipud</code><span class="sig-paren">(</span><em>image</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#flipud"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.flipud" title="Permalink to this definition">¶</a></dt>
<dd><p>Flip image up to down.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">image</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;uint8&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flipud</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
<span class="go">array([[2, 3],</span>
<span class="go">       [0, 1]], dtype=uint8)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>array image</strong> (<em>numpy</em>) &#8211; Numpy array with range [0,255] and dtype &#8216;uint8&#8217;.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Flipped image</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">numpy array with range [0,255] and dtype &#8216;uint8&#8217;</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.floatimg2uint8">
<code class="descname">floatimg2uint8</code><span class="sig-paren">(</span><em>image</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#floatimg2uint8"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.floatimg2uint8" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert array with floats to &#8216;uint8&#8217; and rescale from [0,1] to [0, 256].</p>
<p>Converts only if image.dtype != uint8.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">image</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arr</span> <span class="o">=</span> <span class="n">floatimg2uint8</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
<span class="go">255</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>image</strong> (<em>numpy.array</em>) &#8211; Numpy array with range [0,1]</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Numpy array with range [0,255] and dtype &#8216;uint8&#8217;</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">numpy array</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.identical">
<code class="descname">identical</code><span class="sig-paren">(</span><em>image</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#identical"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.identical" title="Permalink to this definition">¶</a></dt>
<dd><p>Return input image unchanged.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>image</strong> (<em>numpy.array</em>) &#8211; Should be a numpy array of an image.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Same as input</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">Same as input</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.load_image">
<code class="descname">load_image</code><span class="sig-paren">(</span><em>filepath</em>, <em>as_grey=False</em>, <em>dtype='uint8'</em>, <em>no_alpha=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#load_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.load_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Load image as numpy array from given filepath.</p>
<p>Supported formats: gif, png, jpg, bmp, tif</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">load_image</span><span class="p">(</span><span class="s1">&#39;tests/data/img_formats/nut_color.jpg&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">shapestr</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
<span class="go">&#39;213x320x3&#39;</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>filepath</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) &#8211; Filepath to image file.</li>
<li><strong>as_grey</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">numpy array with shapes
(h, w) for grayscale or monochrome,
(h, w, 3) for RGB (3 color channels in last axis)
(h, w, 4) for RGBA (for no_alpha = False)
(h, w, 3) for RGBA (for no_alpha = True)
pixel values are in range [0,255] for dtype = uint8</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.mask_choice">
<code class="descname">mask_choice</code><span class="sig-paren">(</span><em>mask</em>, <em>value</em>, <em>n</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#mask_choice"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.mask_choice" title="Permalink to this definition">¶</a></dt>
<dd><p>Random selection of n points where mask has given value</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>   <span class="c1"># ensure same random selection for doctest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;uint8&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask_choice</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="go">[[0, 0], [2, 2]]</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>array mask</strong> (<em>numpy</em>) &#8211; Numpy array with range [0,255] and dtype &#8216;uint8&#8217;.</li>
<li><strong>n</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Number of points to select. If n is larger than the
points available only the available points will be returned.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Array with x,y coordinates</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy array with shape nx2 where each row contains x, y</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.mask_where">
<code class="descname">mask_where</code><span class="sig-paren">(</span><em>mask</em>, <em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#mask_where"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.mask_where" title="Permalink to this definition">¶</a></dt>
<dd><p>Return x,y coordinates where mask has specified value</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;uint8&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask_where</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="go">[[0, 0], [1, 1], [2, 2]]</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>array mask</strong> (<em>numpy</em>) &#8211; Numpy array with range [0,255] and dtype &#8216;uint8&#8217;.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Array with x,y coordinates</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">numpy array with shape Nx2 where each row contains x, y</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.normalize_histo">
<code class="descname">normalize_histo</code><span class="sig-paren">(</span><em>image</em>, <em>gamma=0.8</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#normalize_histo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.normalize_histo" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform histogram normalization on image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>array image</strong> (<em>numpy</em>) &#8211; Numpy array with range [0,255] and dtype &#8216;uint8&#8217;.</li>
<li><strong>gamma</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Factor for gamma adjustment.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Normalized image</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy array with range [0,255] and dtype &#8216;uint8&#8217;</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.patch_iter">
<code class="descname">patch_iter</code><span class="sig-paren">(</span><em>image</em>, <em>shape=(3</em>, <em>3)</em>, <em>stride=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#patch_iter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.patch_iter" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts patches from images with given shape.</p>
<p>Patches are extracted in a regular grid with the given stride,
starting in the left upper corner and then row-wise.
Image can be gray-scale (no third channel dim) or color.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">patch_iter</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="mi">2</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span> <span class="n">p</span>
<span class="go">[[0 1]</span>
<span class="go"> [4 5]]</span>
<span class="go">[[2 3]</span>
<span class="go"> [6 7]]</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>image</strong> (<em>ndarray</em>) &#8211; Numpy array of shape h,w,c or h,w.</li>
<li><strong>shape</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) &#8211; Shape of patch (h,w)</li>
<li><strong>stride</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Step size of grid patches are extracted from</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Iterator over patches</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Iterator</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.pil_to_arr">
<code class="descname">pil_to_arr</code><span class="sig-paren">(</span><em>image</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#pil_to_arr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.pil_to_arr" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert PIL image to Numpy array.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rgb_arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;uint8&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pil_img</span> <span class="o">=</span> <span class="n">arr_to_pil</span><span class="p">(</span><span class="n">rgb_arr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arr</span> <span class="o">=</span> <span class="n">pil_to_arr</span><span class="p">(</span><span class="n">pil_img</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">shapestr</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
<span class="go">&#39;5x4x3&#39;</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>image</strong> (<em>PIL.Image</em>) &#8211; PIL image (RGB or grayscale)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Numpy array</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">numpy.array with dtype &#8216;uint8&#8217;</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.rerange">
<code class="descname">rerange</code><span class="sig-paren">(</span><em>image</em>, <em>old_min</em>, <em>old_max</em>, <em>new_min</em>, <em>new_max</em>, <em>dtype</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#rerange"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.rerange" title="Permalink to this definition">¶</a></dt>
<dd><p>Return image with values in new range.</p>
<p>Note: The default range of images is [0, 255] and most image
processing functions expect this range and will fail otherwise.
However, as input to neural networks re-ranged images, e.g [-1, +1]
are sometimes needed.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">image</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">],</span> <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rerange</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;float32&#39;</span><span class="p">)</span>
<span class="go">array([[-1.,  1.],</span>
<span class="go">       [ 1., -1.]], dtype=float32)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>image</strong> (<em>numpy.array</em>) &#8211; Should be a numpy array of an image.</li>
<li><strong>old_min</strong> (<em>int|float</em>) &#8211; Current minimum value of image, e.g. 0</li>
<li><strong>old_max</strong> (<em>int|float</em>) &#8211; Current maximum value of image, e.g. 255</li>
<li><strong>new_min</strong> (<em>int|float</em>) &#8211; New minimum, e.g. -1.0</li>
<li><strong>new_max</strong> (<em>int|float</em>) &#8211; New maximum, e.g. +1.0</li>
<li><strong>datatype dtype</strong> (<em>numpy</em>) &#8211; Data type of output image,
e.g. float32&#8217; or np.uint8</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Image with values in new range.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.resize">
<code class="descname">resize</code><span class="sig-paren">(</span><em>image</em>, <em>w</em>, <em>h</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#resize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.resize" title="Permalink to this definition">¶</a></dt>
<dd><p>Resize image.</p>
<p>Image can be up- or down-sized (using interpolation). For details see:
<a class="reference external" href="http://scikit-image.org/docs/dev/api/skimage.transform.html#skimage.transform.resize">http://scikit-image.org/docs/dev/api/skimage.transform.html#skimage.transform.resize</a></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">image</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;uint8&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">resize</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">array([[1, 1, 1, 1],</span>
<span class="go">       [1, 1, 1, 1],</span>
<span class="go">       [1, 1, 1, 1]], dtype=uint8)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>array image</strong> (<em>numpy</em>) &#8211; Numpy array with range [0,255] and dtype &#8216;uint8&#8217;.</li>
<li><strong>w</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Width in pixels.</li>
<li><strong>h</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Height in pixels.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Resized image</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy array with range [0,255] and dtype &#8216;uint8&#8217;</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.rotate">
<code class="descname">rotate</code><span class="sig-paren">(</span><em>image</em>, <em>angle=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#rotate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.rotate" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotate image.</p>
<p>Note that this rotate function is designed for images and does not perform
a &#8216;mathematically correct&#8217; rotation of a matrix, e.g. for 90 degrees.
For details see:
<a class="reference external" href="http://scikit-image.org/docs/dev/api/skimage.transform.html#skimage.transform.rotate">http://scikit-image.org/docs/dev/api/skimage.transform.html#skimage.transform.rotate</a></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">image</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;uint8&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rotated</span> <span class="o">=</span> <span class="n">rotate</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="mi">45</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>array image</strong> (<em>numpy</em>) &#8211; Numpy array with range [0,255] and dtype &#8216;uint8&#8217;.</li>
<li><strong>angle</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Angle in degrees in counter-clockwise direction</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Rotated image</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy array with range [0,255] and dtype &#8216;uint8&#8217;</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.sample_labeled_patch_centers">
<code class="descname">sample_labeled_patch_centers</code><span class="sig-paren">(</span><em>mask</em>, <em>value</em>, <em>pshape</em>, <em>n</em>, <em>label</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#sample_labeled_patch_centers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.sample_labeled_patch_centers" title="Permalink to this definition">¶</a></dt>
<dd><p>Randomly pick n points in mask where mask has given value and add label.</p>
<p>Same as imageutil.sample_mask but adds given label to each center</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sample_labeled_patch_centers</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">array([[1, 2, 0]], dtype=uint16)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>mask</strong> (<em>ndarray</em>) &#8211; Mask</li>
<li><strong>value</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Sample points in mask that have this value.</li>
<li><strong>pshape</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) &#8211; Patch shape of form (h,w)</li>
<li><strong>n</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Number of points to sample. If there is not enough points
to sample from a smaller number will be returned. If there are not
points at all np.empty((0, 2)) will be returned.</li>
<li><strong>label</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Numeric label to append to each center point</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Center points of patches within the mask where the center point
has the given mask value and the label</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">ndarray of shape (n, 3)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.sample_mask">
<code class="descname">sample_mask</code><span class="sig-paren">(</span><em>mask</em>, <em>value</em>, <em>pshape</em>, <em>n</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#sample_mask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.sample_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Randomly pick n points in mask where mask has given value.</p>
<p>Ensure that only points picked that can be center of a patch with
shape pshape that is inside the mask.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sample_mask</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">array([[1, 2]], dtype=uint16)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>mask</strong> (<em>ndarray</em>) &#8211; Mask</li>
<li><strong>value</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Sample points in mask that have this value.</li>
<li><strong>pshape</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) &#8211; Patch shape of form (h,w)</li>
<li><strong>n</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Number of points to sample. If there is not enough points
to sample from a smaller number will be returned. If there are not
points at all np.empty((0, 2)) will be returned.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Center points of patches within the mask where the center point
has the given mask value.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">ndarray of shape (n, 2)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.sample_patch_centers">
<code class="descname">sample_patch_centers</code><span class="sig-paren">(</span><em>mask</em>, <em>pshape</em>, <em>npos</em>, <em>nneg</em>, <em>pos=255</em>, <em>neg=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#sample_patch_centers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.sample_patch_centers" title="Permalink to this definition">¶</a></dt>
<dd><p>Sample positive and negative patch centers where mask value is pos or neg.</p>
<p>The sampling routine ensures that the patch is completely inside the mask.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>   <span class="c1"># just to ensure consistent doctest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">255</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sample_patch_centers</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">array([[1, 1, 0],</span>
<span class="go">       [1, 2, 1]], dtype=uint16)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>mask</strong> (<em>ndarray</em>) &#8211; Mask</li>
<li><strong>pshape</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) &#8211; Patch shape of form (h,w)</li>
<li><strong>npos</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Number of positives to sample.</li>
<li><strong>nneg</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Number of negatives to sample.</li>
<li><strong>pos</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Value for positive points in mask</li>
<li><strong>neg</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Value for negative points in mask</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Center points of patches within the mask where the center point
has the given mask value (pos, neg) and the label (1, 0)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">ndarray of shape (n, 3)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.sample_pn_patches">
<code class="descname">sample_pn_patches</code><span class="sig-paren">(</span><em>image</em>, <em>mask</em>, <em>pshape</em>, <em>npos</em>, <em>nneg</em>, <em>pos=255</em>, <em>neg=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#sample_pn_patches"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.sample_pn_patches" title="Permalink to this definition">¶</a></dt>
<dd><p>Sample positive and negative patches where mask value is pos or neg.</p>
<p>The sampling routine ensures that the patch is completely inside the
image and mask and that a patch a the same position is extracted from
the image and the mask.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>   <span class="c1"># just to ensure consistent doctest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;uint8&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;uint8&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">255</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">ip</span><span class="p">,</span> <span class="n">mp</span><span class="p">,</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">sample_pn_patches</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">mask</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span> <span class="n">ip</span>
<span class="gp">... </span>    <span class="nb">print</span> <span class="n">mp</span>
<span class="gp">... </span>    <span class="nb">print</span> <span class="n">l</span>
<span class="go">[[0 1]</span>
<span class="go"> [4 5]]</span>
<span class="go">[[0 0]</span>
<span class="go"> [0 0]]</span>
<span class="go">0</span>
<span class="go">[[1 2]</span>
<span class="go"> [5 6]]</span>
<span class="go">[[  0   0]</span>
<span class="go"> [  0 255]]</span>
<span class="go">1</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>mask</strong> (<em>ndarray</em>) &#8211; Mask</li>
<li><strong>pshape</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) &#8211; Patch shape of form (h,w)</li>
<li><strong>npos</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Number of positives to sample.</li>
<li><strong>nneg</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Number of negatives to sample.</li>
<li><strong>pos</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Value for positive points in mask</li>
<li><strong>neg</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Value for negative points in mask</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Image and mask patches where the patch center point
has the given mask value (pos, neg) and the label (1, 0)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)">tuple</a>(image_patch, mask_patch, label)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.save_image">
<code class="descname">save_image</code><span class="sig-paren">(</span><em>filepath</em>, <em>image</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#save_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.save_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Save numpy array as image to given filepath.</p>
<p>Supported formats: gif, png, jpg, bmp, tif</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filepath</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) &#8211; File path for image file. Extension determines
image file format, e.g. .gif</li>
<li><strong>array image</strong> (<em>numpy</em>) &#8211; Numpy array to save as image.
Must be of shape (h,w) or (h,w,3) or (h,w,4)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nutsml.imageutil.shear">
<code class="descname">shear</code><span class="sig-paren">(</span><em>image</em>, <em>shear_factor</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/imageutil.html#shear"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.imageutil.shear" title="Permalink to this definition">¶</a></dt>
<dd><p>Shear image.</p>
<p>For details see:
<a class="reference external" href="http://scikit-image.org/docs/dev/api/skimage.transform.html#skimage.transform.AffineTransform">http://scikit-image.org/docs/dev/api/skimage.transform.html#skimage.transform.AffineTransform</a></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">image</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;uint8&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rotated</span> <span class="o">=</span> <span class="n">rotate</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="mi">45</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>array image</strong> (<em>numpy</em>) &#8211; Numpy array with range [0,255] and dtype &#8216;uint8&#8217;.</li>
<li><strong>shear_factor</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Shear factor [0, 1]</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Sheared image</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy array with range [0,255] and dtype &#8216;uint8&#8217;</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-nutsml.logger">
<span id="nutsml-logger-module"></span><h2>nutsml.logger module<a class="headerlink" href="#module-nutsml.logger" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-logger"></span><dl class="class">
<dt id="nutsml.logger.LogCols">
<em class="property">class </em><code class="descname">LogCols</code><span class="sig-paren">(</span><em>filepath</em>, <em>cols=None</em>, <em>colnames=None</em>, <em>reset=True</em>, <em>delimiter='</em>, <em>'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/logger.html#LogCols"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.logger.LogCols" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">nutsflow.base.NutFunction</span></code></p>
<p>Log columns of data to file.</p>
<dl class="method">
<dt id="nutsml.logger.LogCols.__call__">
<code class="descname">__call__</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/logger.html#LogCols.__call__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.logger.LogCols.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Log x</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>x</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#any" title="(in Python v2.7)"><em>any</em></a>) &#8211; Any type of data.
Special support for numpy arrays.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Return input unchanged</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">Same as input</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nutsml.logger.LogCols.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>filepath</em>, <em>cols=None</em>, <em>colnames=None</em>, <em>reset=True</em>, <em>delimiter='</em>, <em>'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/logger.html#LogCols.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.logger.LogCols.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct logger.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nutsflow</span> <span class="k">import</span> <span class="n">Consume</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filepath</span> <span class="o">=</span> <span class="s1">&#39;tests/data/temp_logfile.csv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">LogCols</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span> <span class="k">as</span> <span class="n">log_cols</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">data</span> <span class="o">&gt;&gt;</span> <span class="n">log_cols</span> <span class="o">&gt;&gt;</span> <span class="n">Consume</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="go">1,2</span>
<span class="go">3,4</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">log_cols</span> <span class="o">=</span> <span class="n">LogCols</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">colnames</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">&gt;&gt;</span> <span class="n">log_cols</span> <span class="o">&gt;&gt;</span> <span class="n">Consume</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="go">a,b</span>
<span class="go">2,1</span>
<span class="go">4,3</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">log_cols</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">log_cols</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filepath</strong> (<em>strin</em>) &#8211; Path to file to write log to.</li>
<li><strong>cols</strong> (<em>int|tuple|None</em>) &#8211; Indices of columns of input data to write.
None: write all columns
int: only write the single given column
tuple: list of column indices</li>
<li><strong>colnames</strong> (<em>tuple|None</em>) &#8211; Column names to write in first line.
If None no colnames are written.</li>
<li><strong>reset</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; If True the writing to the log file is reset
if the logger is recreated. Otherwise log data is appended
to the log file.</li>
<li><strong>delimiter</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; Delimiter for columns in log file.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nutsml.logger.LogCols.close">
<code class="descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/logger.html#LogCols.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.logger.LogCols.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Implementation of context manager API</p>
</dd></dl>

<dl class="method">
<dt id="nutsml.logger.LogCols.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/logger.html#LogCols.delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.logger.LogCols.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete log file</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-nutsml.network">
<span id="nutsml-network-module"></span><h2>nutsml.network module<a class="headerlink" href="#module-nutsml.network" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-network"></span><dl class="class">
<dt id="nutsml.network.KerasNetwork">
<em class="property">class </em><code class="descname">KerasNetwork</code><span class="sig-paren">(</span><em>model</em>, <em>weightspath='weights_keras_net.hd5'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/network.html#KerasNetwork"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.network.KerasNetwork" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#nutsml.network.Network" title="nutsml.network.Network"><code class="xref py py-class docutils literal"><span class="pre">nutsml.network.Network</span></code></a></p>
<p>Wrapper for Keras models: <a class="reference external" href="https://keras.io/">https://keras.io/</a></p>
<dl class="method">
<dt id="nutsml.network.KerasNetwork.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>model</em>, <em>weightspath='weights_keras_net.hd5'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/network.html#KerasNetwork.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.network.KerasNetwork.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct wrapper around Keras model.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>model model</strong> (<em>Keras</em>) &#8211; Keras model to wrap. See
<a class="reference external" href="https://keras.io/models/sequential/">https://keras.io/models/sequential/</a>
<a class="reference external" href="https://keras.io/models/model/">https://keras.io/models/model/</a></li>
<li><strong>weightspath</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) &#8211; Filepath to save/load model weights.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nutsml.network.KerasNetwork.load_weights">
<code class="descname">load_weights</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/network.html#KerasNetwork.load_weights"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.network.KerasNetwork.load_weights" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nutsml.network.KerasNetwork.predict">
<code class="descname">predict</code><span class="sig-paren">(</span><em>flatten=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/network.html#KerasNetwork.predict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.network.KerasNetwork.predict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nutsml.network.KerasNetwork.print_layers">
<code class="descname">print_layers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/network.html#KerasNetwork.print_layers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.network.KerasNetwork.print_layers" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nutsml.network.KerasNetwork.save_weights">
<code class="descname">save_weights</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/network.html#KerasNetwork.save_weights"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.network.KerasNetwork.save_weights" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nutsml.network.KerasNetwork.train">
<code class="descname">train</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/network.html#KerasNetwork.train"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.network.KerasNetwork.train" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nutsml.network.KerasNetwork.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/network.html#KerasNetwork.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.network.KerasNetwork.validate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="nutsml.network.LasagneNetwork">
<em class="property">class </em><code class="descname">LasagneNetwork</code><span class="sig-paren">(</span><em>out_layer</em>, <em>train_fn</em>, <em>val_fn</em>, <em>pred_fn</em>, <em>weightspath='weights_lasagne_net.npz'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/network.html#LasagneNetwork"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.network.LasagneNetwork" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#nutsml.network.Network" title="nutsml.network.Network"><code class="xref py py-class docutils literal"><span class="pre">nutsml.network.Network</span></code></a></p>
<p>Wrapper for Lasagne models: <a class="reference external" href="https://lasagne.readthedocs.io/en/latest/">https://lasagne.readthedocs.io/en/latest/</a></p>
<dl class="method">
<dt id="nutsml.network.LasagneNetwork.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>out_layer</em>, <em>train_fn</em>, <em>val_fn</em>, <em>pred_fn</em>, <em>weightspath='weights_lasagne_net.npz'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/network.html#LasagneNetwork.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.network.LasagneNetwork.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct wrapper around Lasagne network.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>layer out_layer</strong> (<em>Lasgane</em>) &#8211; Output layer of Lasagne network.</li>
<li><strong>function train_fn</strong> (<em>Theano</em>) &#8211; Training function</li>
<li><strong>function val_fn</strong> (<em>Theano</em>) &#8211; Validation function</li>
<li><strong>function pred_fn</strong> (<em>Theano</em>) &#8211; Prediction function</li>
<li><strong>weightspath</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) &#8211; Filepath to save/load model weights.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nutsml.network.LasagneNetwork.load_weights">
<code class="descname">load_weights</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/network.html#LasagneNetwork.load_weights"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.network.LasagneNetwork.load_weights" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nutsml.network.LasagneNetwork.predict">
<code class="descname">predict</code><span class="sig-paren">(</span><em>flatten=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/network.html#LasagneNetwork.predict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.network.LasagneNetwork.predict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nutsml.network.LasagneNetwork.print_layers">
<code class="descname">print_layers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/network.html#LasagneNetwork.print_layers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.network.LasagneNetwork.print_layers" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nutsml.network.LasagneNetwork.save_weights">
<code class="descname">save_weights</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/network.html#LasagneNetwork.save_weights"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.network.LasagneNetwork.save_weights" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nutsml.network.LasagneNetwork.train">
<code class="descname">train</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/network.html#LasagneNetwork.train"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.network.LasagneNetwork.train" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nutsml.network.LasagneNetwork.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/network.html#LasagneNetwork.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.network.LasagneNetwork.validate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="nutsml.network.Network">
<em class="property">class </em><code class="descname">Network</code><span class="sig-paren">(</span><em>weightspath</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/network.html#Network"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.network.Network" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Abstract base class for networks. Allows to wrap existing network APIs
such as Lasagne or Keras into an API that enables direct usage of the
network as a Nut in a nuts flow.</p>
<dl class="method">
<dt id="nutsml.network.Network.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>weightspath</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/network.html#Network.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.network.Network.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs base wrapper for networks.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>weightspath</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) &#8211; Filepath where network weights are saved to
and loaded from.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nutsml.network.Network.evaluate">
<code class="descname">evaluate</code><span class="sig-paren">(</span><em>metrics</em>, <em>predcol=None</em>, <em>targetcol=-1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/network.html#Network.evaluate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.network.Network.evaluate" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate performance of network for given metrices</p>
<p>acc, f1 = samples &gt;&gt; batcher &gt;&gt; network.evaluate([accuracy, f1_score])</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>metric</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#list" title="(in Python v2.7)"><em>list</em></a>) &#8211; List of metrics. See EvalNut for details.</li>
<li><strong>predcol</strong> (<em>int|None</em>) &#8211; Index of column in prediction to extract
for evaluation. If None a single prediction output is
expected.</li>
<li><strong>targetcol</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Index of batch column that contain targets.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Result for each metric as a tuple or a single float if
there is only one metric.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nutsml.network.Network.load_weights">
<code class="descname">load_weights</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/network.html#Network.load_weights"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.network.Network.load_weights" title="Permalink to this definition">¶</a></dt>
<dd><p>Load network weights. self.weightspath is used.</p>
<p>network.load_weights()</p>
</dd></dl>

<dl class="method">
<dt id="nutsml.network.Network.predict">
<code class="descname">predict</code><span class="sig-paren">(</span><em>flatten=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/network.html#Network.predict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.network.Network.predict" title="Permalink to this definition">¶</a></dt>
<dd><p>Get network predictions</p>
<p>predictions = samples &gt;&gt; batcher &gt;&gt; network.predict() &gt;&gt; Collect()</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>flatten</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; True: return individual predictions instead
of batch of prediction</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Typically returns softmax class probabilities.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">ndarray</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nutsml.network.Network.print_layers">
<code class="descname">print_layers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/network.html#Network.print_layers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.network.Network.print_layers" title="Permalink to this definition">¶</a></dt>
<dd><p>Print description of the network layers</p>
</dd></dl>

<dl class="method">
<dt id="nutsml.network.Network.save_best">
<code class="descname">save_best</code><span class="sig-paren">(</span><em>score</em>, <em>isloss=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/network.html#Network.save_best"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.network.Network.save_best" title="Permalink to this definition">¶</a></dt>
<dd><p>Save weights of best network</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>score</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Score of the network, e.g. loss, accuracy</li>
<li><strong>isloss</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; True means lower score is better, e.g. loss
and the network with the lower score score is saved.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nutsml.network.Network.save_weights">
<code class="descname">save_weights</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/network.html#Network.save_weights"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.network.Network.save_weights" title="Permalink to this definition">¶</a></dt>
<dd><p>Save network weights. self.weightspath is used.</p>
<p>network.save_weights()</p>
</dd></dl>

<dl class="method">
<dt id="nutsml.network.Network.train">
<code class="descname">train</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/network.html#Network.train"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.network.Network.train" title="Permalink to this definition">¶</a></dt>
<dd><p>Train network</p>
<p>train_losses = samples &gt;&gt; batcher &gt;&gt; network.train() &gt;&gt; Collect()</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Typically returns training loss per batch.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nutsml.network.Network.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/network.html#Network.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.network.Network.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate network</p>
<p>val_losses = samples &gt;&gt; batcher &gt;&gt; network.validate() &gt;&gt; Collect()</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Typically returns validation loss per batch.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-nutsml.plotter">
<span id="nutsml-plotter-module"></span><h2>nutsml.plotter module<a class="headerlink" href="#module-nutsml.plotter" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-plotter"></span><dl class="class">
<dt id="nutsml.plotter.PlotLines">
<em class="property">class </em><code class="descname">PlotLines</code><span class="sig-paren">(</span><em>ycols</em>, <em>xcols=count(0)</em>, <em>layout=(1</em>, <em>None)</em>, <em>every_sec=0</em>, <em>every_n=0</em>, <em>filterfunc=&lt;function &lt;lambda&gt;&gt;</em>, <em>figsize=None</em>, <em>filepath=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/plotter.html#PlotLines"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.plotter.PlotLines" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">nutsflow.base.NutFunction</span></code></p>
<p>Plot lines for selected data columns</p>
<dl class="method">
<dt id="nutsml.plotter.PlotLines.__call__">
<code class="descname">__call__</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/plotter.html#PlotLines.__call__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.plotter.PlotLines.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot data</p>
</dd></dl>

<dl class="method">
<dt id="nutsml.plotter.PlotLines.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>ycols</em>, <em>xcols=count(0)</em>, <em>layout=(1</em>, <em>None)</em>, <em>every_sec=0</em>, <em>every_n=0</em>, <em>filterfunc=&lt;function &lt;lambda&gt;&gt;</em>, <em>figsize=None</em>, <em>filepath=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/plotter.html#PlotLines.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.plotter.PlotLines.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>iterable &gt;&gt; PlotLines(ycols) &gt;&gt; Consume()</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nutsflow</span> <span class="k">import</span> <span class="n">Consume</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fp</span> <span class="o">=</span> <span class="s1">&#39;tests/data/temp_plotter.png&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">6.3</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ysin</span><span class="p">,</span> <span class="n">ycos</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">xs</span><span class="p">),</span>  <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">xs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ysin</span><span class="p">,</span> <span class="n">ycos</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">&gt;&gt;</span> <span class="n">PlotLines</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">filepath</span><span class="o">=</span><span class="n">fp</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">Consume</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">ycos</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">PlotLines</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">filepath</span><span class="o">=</span><span class="n">fp</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">Consume</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">&gt;&gt;</span> <span class="n">PlotLines</span><span class="p">(</span><span class="n">ycols</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="n">filepath</span><span class="o">=</span><span class="n">fp</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">Consume</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ycols</strong> (<em>int|tuple</em>) &#8211; Index or tuple of indices of the data columns
that contain the y-data for the plot.</li>
<li><strong>xcols</strong> (<em>int|tuple|function|iterable</em>) &#8211; Index or tuple of indices of
the data columns that contain the x-data for the plot.
Alternatively an iterator or a function can be provided that
generates the x-data for the plot, e.g. xcols = itertools.count()
or xcols = lambda: epoch</li>
<li><strong>layout</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) &#8211; Rows and columns of the plotter layout., e.g.
a layout of (2,3) means that 6 plots in the data are
arranged in 2 rows and 3 columns.
Number of cols can be None is then derived from ycols</li>
<li><strong>every_sec</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Plot every given second, e.g. to plot
every 2.5 sec every_sec = 2.5</li>
<li><strong>every_n</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Plot every n-th call.</li>
<li><strong>filterfunc</strong> (<em>function</em>) &#8211; Boolean function to filter plot data.</li>
<li><strong>figsize</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) &#8211; Figure size in inch.</li>
<li><strong>filepath</strong> &#8211; Path to a file to draw plot to. If provided the
plot will not appear on the screen.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Returns input unaltered</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/2/library/functions.html#any" title="(in Python v2.7)">any</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nutsml.plotter.PlotLines.reset">
<code class="descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/plotter.html#PlotLines.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.plotter.PlotLines.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset plot data</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-nutsml.reader">
<span id="nutsml-reader-module"></span><h2>nutsml.reader module<a class="headerlink" href="#module-nutsml.reader" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-reader"></span><dl class="class">
<dt id="nutsml.reader.ReadPandas">
<em class="property">class </em><code class="descname">ReadPandas</code><span class="sig-paren">(</span><em>filepath</em>, <em>rows=None</em>, <em>columns=None</em>, <em>dropnan=True</em>, <em>replacenan=False</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/reader.html#ReadPandas"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.reader.ReadPandas" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">nutsflow.base.NutSource</span></code></p>
<p>Read data as Pandas table from file system.</p>
<dl class="method">
<dt id="nutsml.reader.ReadPandas.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>filepath</em>, <em>rows=None</em>, <em>columns=None</em>, <em>dropnan=True</em>, <em>replacenan=False</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/reader.html#ReadPandas.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.reader.ReadPandas.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create reader for Pandas tables.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nutsflow</span> <span class="k">import</span> <span class="n">Collect</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ReadPandas</span><span class="p">(</span><span class="s1">&#39;tests/data/pandas_table.csv&#39;</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">Collect</span><span class="p">()</span>
<span class="go">[(1.0, 4.0), (3.0, 6.0)]</span>
</pre></div>
</div>
<p>Note that samples.table contains the original Pandas dataframe and
any Pandas operations can be performed on it.
&gt;&gt;&gt; samples = ReadPandas(&#8216;tests/data/pandas_table.csv&#8217;)
&gt;&gt;&gt; samples.dataframe.head()</p>
<blockquote>
<div>col1  col2</div></blockquote>
<p>0     1   4.0
1     2   NaN
2     3   6.0</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">samples</span> <span class="o">=</span> <span class="n">ReadPandas</span><span class="p">(</span><span class="s1">&#39;tests/data/pandas_table.csv&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">samples</span><span class="o">.</span><span class="n">dataframe</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="go">[&#39;col1&#39;, &#39;col2&#39;]</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filepath</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; Path to a table in CSV, TSV, XLSX or
Pandas pickle format. Depending of file extension (e.g. .csv)
the table format is picked.
Note tables must have a header with the column names or
use kwarg header=None</li>
<li><strong>rows</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; Rows to filter. Any Pandas filter expression. If
rows = None all rows of the table are returned.</li>
<li><strong>columns</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#list" title="(in Python v2.7)"><em>list</em></a>) &#8211; List of names for the table columns to return.
For columns = None all columns are returned.</li>
<li><strong>dropnan</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; If True all rows that contain NaN are dropped.</li>
<li><strong>replacenan</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(in Python v2.7)"><em>object</em></a>) &#8211; If not False all NaNs are replaced by
the value of replacenan</li>
<li><strong>kwargs</strong> (<em>kwargs</em>) &#8211; Key word arguments passed on the the Pandas
methods for data reading, e.g, header=None.
See  pandas/pandas/io/parsers.py for detais</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nutsml.reader.ReadPandas.dply">
<code class="descname">dply</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/reader.html#ReadPandas.dply"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.reader.ReadPandas.dply" title="Permalink to this definition">¶</a></dt>
<dd><p>Return dplyr frame for the read table.</p>
<p>dplyr is an R inspired wrapper to process Pandas tables in a
flow-like manner. See <a class="reference external" href="https://github.com/dodger487/dplython">https://github.com/dodger487/dplython</a> and
<a class="reference external" href="https://cran.rstudio.com/web/packages/dplyr/vignettes/introduction.html">https://cran.rstudio.com/web/packages/dplyr/vignettes/introduction.html</a>
for more details about dplyr.</p>
<p>dplyr and Nuts use the same syntax (&gt;&gt;) for chaining functions and
integrate nicely with each other.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">dplyr dataframe instead of Pandas dataframe.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">DplyFrame</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="nutsml.reader.ReadPandas.isnull">
<em class="property">static </em><code class="descname">isnull</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/reader.html#ReadPandas.isnull"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.reader.ReadPandas.isnull" title="Permalink to this definition">¶</a></dt>
<dd><p>Return true if values is NaN or None.</p>
<p>&gt;&gt; import numpy as np
&gt;&gt; ReadPandas.isnull(np.NaN)
True</p>
<p>&gt;&gt; ReadPandas.isnull(None)
True</p>
<p>&gt;&gt; ReadPandas.isnull(0)
False</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>value</strong> &#8211; Value to test</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Return true for NaN or None values.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)">bool</a></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-nutsml.stratify">
<span id="nutsml-stratify-module"></span><h2>nutsml.stratify module<a class="headerlink" href="#module-nutsml.stratify" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-stratify"></span></div>
<div class="section" id="module-nutsml.transformer">
<span id="nutsml-transformer-module"></span><h2>nutsml.transformer module<a class="headerlink" href="#module-nutsml.transformer" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-transformer"></span><dl class="class">
<dt id="nutsml.transformer.AugmentImage">
<em class="property">class </em><code class="descname">AugmentImage</code><span class="sig-paren">(</span><em>imagecols</em>, <em>rand=&lt;random.Random object at 0x000000000AC78D48&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/transformer.html#AugmentImage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.transformer.AugmentImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">nutsflow.base.Nut</span></code></p>
<p>Random augmentation of images in samples</p>
<dl class="method">
<dt id="nutsml.transformer.AugmentImage.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>imagecols</em>, <em>rand=&lt;random.Random object at 0x000000000AC78D48&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/transformer.html#AugmentImage.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.transformer.AugmentImage.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>samples &gt;&gt; AugmentImage(imagecols, rand=rnd.Random())</p>
<p>Randomly augment images, e.g. changing contrast. See TransformImage for
a full list of available augmentations. Every transformation can be
used as an augmentation. Note that the same (random) augmentation
is applied to all images specified in imagecols. This ensures that
an image and its mask are randomly rotated by the same angle,
for instance.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">augment_img</span> <span class="o">=</span> <span class="p">(</span><span class="n">AugmentImage</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">... </span>    <span class="o">.</span><span class="n">by</span><span class="p">(</span><span class="s1">&#39;identical&#39;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="gp">... </span>    <span class="o">.</span><span class="n">by</span><span class="p">(</span><span class="s1">&#39;brightness&#39;</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">1.3</span><span class="p">])</span>
<span class="gp">... </span>    <span class="o">.</span><span class="n">by</span><span class="p">(</span><span class="s1">&#39;contrast&#39;</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">1.3</span><span class="p">])</span>
<span class="gp">... </span>    <span class="o">.</span><span class="n">by</span><span class="p">(</span><span class="s1">&#39;fliplr&#39;</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="gp">... </span>    <span class="o">.</span><span class="n">by</span><span class="p">(</span><span class="s1">&#39;flipud&#39;</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="gp">... </span>    <span class="o">.</span><span class="n">by</span><span class="p">(</span><span class="s1">&#39;rotate&#39;</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">360</span><span class="p">]))</span>
</pre></div>
</div>
<p>Note that each augmentation is applied independently. This is in
contrast to transformations which are applied in sequence and
result in one image.
Augmentation on the other hand are randomly applied and can result
in many images. However, augmenters can be chained to achieve
combinations of augmentation, e.g. contrast or brightness combined with
rotation or shearing:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">augment1</span> <span class="o">=</span> <span class="p">(</span><span class="n">AugmentImage</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">... </span>    <span class="o">.</span><span class="n">by</span><span class="p">(</span><span class="s1">&#39;brightness&#39;</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">1.3</span><span class="p">])</span>
<span class="gp">... </span>    <span class="o">.</span><span class="n">by</span><span class="p">(</span><span class="s1">&#39;contrast&#39;</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">1.3</span><span class="p">]))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">augment2</span> <span class="o">=</span> <span class="p">(</span><span class="n">AugmentImage</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">... </span>    <span class="o">.</span><span class="n">by</span><span class="p">(</span><span class="s1">&#39;shear&#39;</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">])</span>
<span class="gp">... </span>    <span class="o">.</span><span class="n">by</span><span class="p">(</span><span class="s1">&#39;rotate&#39;</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">360</span><span class="p">]))</span>
</pre></div>
</div>
<p>samples &gt;&gt; augment1 &gt;&gt; augment2 &gt;&gt; Consume()</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>imagecols</strong> (<em>int|tuple</em>) &#8211; Indices of sample columns that contain
images.</li>
<li><strong>rand</strong> (<em>Random</em>) &#8211; Random number generator to be used.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nutsml.transformer.AugmentImage.__rrshift__">
<code class="descname">__rrshift__</code><span class="sig-paren">(</span><em>iterable</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/transformer.html#AugmentImage.__rrshift__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.transformer.AugmentImage.__rrshift__" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply augmentation to samples in iterable.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>iterable</strong> (<em>iterable</em>) &#8211; Samples</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">iterable with augmented samples</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">iterable</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nutsml.transformer.AugmentImage.by">
<code class="descname">by</code><span class="sig-paren">(</span><em>name</em>, <em>prob</em>, <em>*ranges</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/transformer.html#AugmentImage.by"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.transformer.AugmentImage.by" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify and add augmentation to be performed.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">augment_img</span> <span class="o">=</span> <span class="n">AugmentImage</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">by</span><span class="p">(</span><span class="s1">&#39;rotate&#39;</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">360</span><span class="p">])</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) &#8211; Name of the augmentation/transformation, e.g.
&#8216;rotate&#8217;</li>
<li><strong>prob</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Probability [0,1] that the augmentation is applied.</li>
<li><strong>of lists ranges</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#list" title="(in Python v2.7)"><em>list</em></a>) &#8211; <p>Lists with ranges for each argument of
the augmentation, e.g. [0, 360] degrees, where parameters are</p>
<blockquote>
<div>randomly sampled from.</div></blockquote>
</li>
<li><strong>kwargs</strong> (<em>kwargs</em>) &#8211; Keyword arguments passed on the the augmentation.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">instance of AugmentImage</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#nutsml.transformer.AugmentImage" title="nutsml.transformer.AugmentImage">AugmentImage</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="nutsml.transformer.ImageChannelMean">
<em class="property">class </em><code class="descname">ImageChannelMean</code><span class="sig-paren">(</span><em>imagecol</em>, <em>filepath='image_channel_means.npy'</em>, <em>means=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/transformer.html#ImageChannelMean"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.transformer.ImageChannelMean" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">nutsflow.base.NutFunction</span></code></p>
<p>Compute, save per-channel means over images and subtract from images.</p>
<dl class="method">
<dt id="nutsml.transformer.ImageChannelMean.__call__">
<code class="descname">__call__</code><span class="sig-paren">(</span><em>sample</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/transformer.html#ImageChannelMean.__call__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.transformer.ImageChannelMean.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Subtract per-channel mean from images in samples.</p>
<p>sub_mean = ImageChannelMean(imagecol, filepath=&#8217;means.npy&#8217;)
samples &gt;&gt; sub_mean &gt;&gt; Consume()</p>
<p>sub_mean = ImageChannelMean(imagecol, means=[197, 87, 101])
samples &gt;&gt; sub_mean &gt;&gt; Consume()</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>sample</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) &#8211; Sample that contains an image (at imagecol).</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Sample with image where mean is subtracted.
Note that image will not be of dtype uint8 and
in range [0,255] anymore!</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)">tuple</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nutsml.transformer.ImageChannelMean.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>imagecol</em>, <em>filepath='image_channel_means.npy'</em>, <em>means=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/transformer.html#ImageChannelMean.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.transformer.ImageChannelMean.__init__" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><dl class="docutils">
<dt>samples &gt;&gt; ImageChannelMean(imagecol,</dt>
<dd>filepath=&#8217;image_channel_means.npy&#8217;,
means=None)</dd>
</dl>
<p>Construct ImageChannelMean nut.</p>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>imagecol</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Index of sample column that contain image</li>
<li><strong>filepath</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) &#8211; Path to file were mean values are saved
and loaded from.</li>
<li><strong>means</strong> (<em>list|tuple</em>) &#8211; Mean values can be provided directly.
In this case filepath will be ignored and training is not
necessary.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nutsml.transformer.ImageChannelMean.train">
<code class="descname">train</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/transformer.html#ImageChannelMean.train"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.transformer.ImageChannelMean.train" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute per-channel mean over images in samples.</p>
<p>sub_mean = ImageChannelMean(imagecol, filepath)
samples &gt;&gt; sub_mean.train() &gt;&gt; Consume()</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Input samples are returned unchanged</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)">tuple</a></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="nutsml.transformer.ImageMean">
<em class="property">class </em><code class="descname">ImageMean</code><span class="sig-paren">(</span><em>imagecol</em>, <em>filepath='image_means.npy'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/transformer.html#ImageMean"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.transformer.ImageMean" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">nutsflow.base.NutFunction</span></code></p>
<p>Compute, save mean over images and subtract from images.</p>
<dl class="method">
<dt id="nutsml.transformer.ImageMean.__call__">
<code class="descname">__call__</code><span class="sig-paren">(</span><em>sample</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/transformer.html#ImageMean.__call__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.transformer.ImageMean.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Subtract mean from images in samples.</p>
<p>sub_mean = ImageMean(imagecol, filepath)
samples &gt;&gt; sub_mean &gt;&gt; Consume()</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>sample</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) &#8211; Sample that contains an image (at imagecol).</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Sample with image where mean is subtracted.
Note that image will not be of dtype uint8 and
in range [0,255] anymore!</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)">tuple</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nutsml.transformer.ImageMean.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>imagecol</em>, <em>filepath='image_means.npy'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/transformer.html#ImageMean.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.transformer.ImageMean.__init__" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>samples &gt;&gt; ImageMean(imagecol, filepath=&#8217;image_means.npy&#8217;)</p>
<p>Construct ImageMean nut.</p>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>imagecol</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Index of sample column that contain image</li>
<li><strong>filepath</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) &#8211; Path to file were mean values are saved
and loaded from.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nutsml.transformer.ImageMean.train">
<code class="descname">train</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/transformer.html#ImageMean.train"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.transformer.ImageMean.train" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute mean over images in samples.</p>
<p>sub_mean = ImageMean(imagecol, filepath)
samples &gt;&gt; sub_mean.train() &gt;&gt; Consume()</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Input samples are returned unchanged</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)">tuple</a></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="nutsml.transformer.TransformImage">
<em class="property">class </em><code class="descname">TransformImage</code><span class="sig-paren">(</span><em>imagecols</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/transformer.html#TransformImage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.transformer.TransformImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">nutsflow.base.NutFunction</span></code></p>
<p>Transformation of images in samples.</p>
<dl class="method">
<dt id="nutsml.transformer.TransformImage.__call__">
<code class="descname">__call__</code><span class="sig-paren">(</span><em>sample</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/transformer.html#TransformImage.__call__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.transformer.TransformImage.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply transformation to sample.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>sample</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) &#8211; Sample</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Transformed sample</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)">tuple</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nutsml.transformer.TransformImage.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>imagecols</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/transformer.html#TransformImage.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.transformer.TransformImage.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>samples &gt;&gt; TransformImage(imagecols)</p>
<p>Images are expect to be numpy array of the shape (h, w, c) or (h, w)
with a range of [0,255] and a dtype of uint8. Transformation should
result in images with the same properties.</p>
<p>Example
&gt;&gt;&gt; transform = TransformImage(0).by(&#8216;resize&#8217;, 10, 20)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>imagecols</strong> (<em>int|tuple</em>) &#8211; Indices of sample columns the transformation
should be applied to. Can be a single index or a tuple of indices.</li>
<li><strong>transspec</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) &#8211; Transformation specification. Either a
tuple with the name of the transformation function or a tuple
with the name, arguments and keyword arguments of the
transformation function.
The list of argument values and dictionaries provided in the
transspec are simply passed on to the transformation function.
See the relevant functions for details.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nutsml.transformer.TransformImage.by">
<code class="descname">by</code><span class="sig-paren">(</span><em>name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/transformer.html#TransformImage.by"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.transformer.TransformImage.by" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify and add tranformation to be performed.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">transform</span> <span class="o">=</span> <span class="n">TransformImage</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">by</span><span class="p">(</span><span class="s1">&#39;resize&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span><span class="o">.</span><span class="n">by</span><span class="p">(</span><span class="s1">&#39;fliplr&#39;</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) &#8211; Name of the transformation to apply, e.g. &#8216;resize&#8217;</li>
<li><strong>args</strong> (<em>args</em>) &#8211; Arguments for the transformation, e.g. width and
height for resize.</li>
<li><strong>kwargs</strong> (<em>kwargs</em>) &#8211; Keyword arguments passed on to the transformation</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">instance of TransformImage with added transformation</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#nutsml.transformer.TransformImage" title="nutsml.transformer.TransformImage">TransformImage</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="nutsml.transformer.TransformImage.register">
<em class="property">classmethod </em><code class="descname">register</code><span class="sig-paren">(</span><em>name</em>, <em>transformation</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/transformer.html#TransformImage.register"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.transformer.TransformImage.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Register new transformation function.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">brighter</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">image</span><span class="p">,</span> <span class="n">c</span><span class="p">:</span> <span class="n">image</span> <span class="o">*</span> <span class="n">c</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">TransformImage</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s1">&#39;brighter&#39;</span><span class="p">,</span> <span class="n">brighter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transform</span> <span class="o">=</span> <span class="n">TransformImage</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">by</span><span class="p">(</span><span class="s1">&#39;brighter&#39;</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) &#8211; Name of transformation</li>
<li><strong>transformation</strong> (<em>function</em>) &#8211; Transformation function.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="nutsml.transformer.TransformImage.transformations">
<code class="descname">transformations</code><em class="property"> = {'identical': &lt;function identical at 0x000000000978F828&gt;, 'normalize_histo': &lt;function normalize_histo at 0x000000000978F978&gt;, 'rerange': &lt;function rerange at 0x000000000978F7B8&gt;, 'color': &lt;function change_color at 0x000000000978FBA8&gt;, 'sharpness': &lt;function change_sharpness at 0x000000000978FB38&gt;, 'crop': &lt;function crop at 0x000000000978F898&gt;, 'crop_center': &lt;function crop_center at 0x000000000978F908&gt;, 'resize': &lt;function resize at 0x000000000978FC88&gt;, 'rotate': &lt;function rotate at 0x000000000978FC18&gt;, 'flipud': &lt;function flipud at 0x000000000978FDD8&gt;, 'brightness': &lt;function change_brightness at 0x000000000978FAC8&gt;, 'fliplr': &lt;function fliplr at 0x000000000978FD68&gt;, 'shear': &lt;function shear at 0x000000000978FCF8&gt;, 'contrast': &lt;function change_contrast at 0x000000000978FA58&gt;}</em><a class="headerlink" href="#nutsml.transformer.TransformImage.transformations" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="nutsml.transformer.map_transform">
<code class="descname">map_transform</code><span class="sig-paren">(</span><em>sample</em>, <em>imagecols</em>, <em>spec</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/transformer.html#map_transform"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.transformer.map_transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Map transformation function on columns of sample.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>sample</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) &#8211; Sample with images</li>
<li><strong>imagecols</strong> (<em>int|tuple</em>) &#8211; Indices of sample columns the transformation
should be applied to. Can be a single index or a tuple of indices.</li>
<li><strong>spec</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) &#8211; Transformation specification. Either a tuple with
the name of the transformation function or a tuple with the
name, arguments and keyword arguments of the transformation function.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Sample with transformations applied. Columns not specified
remain unchained.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)">tuple</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-nutsml.viewer">
<span id="nutsml-viewer-module"></span><h2>nutsml.viewer module<a class="headerlink" href="#module-nutsml.viewer" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-viewer"></span><dl class="class">
<dt id="nutsml.viewer.ViewImage">
<em class="property">class </em><code class="descname">ViewImage</code><span class="sig-paren">(</span><em>imgcols</em>, <em>layout=(1</em>, <em>None)</em>, <em>figsize=None</em>, <em>pause=0.0001</em>, <em>**imargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/viewer.html#ViewImage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.viewer.ViewImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">nutsflow.base.NutFunction</span></code></p>
<p>Display images in window.</p>
<dl class="method">
<dt id="nutsml.viewer.ViewImage.__call__">
<code class="descname">__call__</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/viewer.html#ViewImage.__call__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.viewer.ViewImage.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>View the images in data</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) &#8211; Data with images at imgcols.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">unchanged input data</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)">tuple</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nutsml.viewer.ViewImage.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>imgcols</em>, <em>layout=(1</em>, <em>None)</em>, <em>figsize=None</em>, <em>pause=0.0001</em>, <em>**imargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/viewer.html#ViewImage.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.viewer.ViewImage.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>iterable &gt;&gt; ViewImage(imgcols, layout=(1, None), figsize=None, <a href="#id1"><span class="problematic" id="id2">**</span></a>plotargs)</p>
<p>Images must be numpy arrays in one of the following formats:
MxN - luminance (grayscale, float array only)
MxNx3 - RGB (float or uint8 array)
MxNx4 - RGBA (float or uint8 array)</p>
<p>See
<a class="reference external" href="http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.imshow">http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.imshow</a></p>
<p>Example
&gt;&gt;&gt; from nutsflow import Consume
&gt;&gt;&gt; from nutsml import ReadImage
&gt;&gt;&gt; imagepath = &#8216;tests/data/img_formats/<a href="#id3"><span class="problematic" id="id4">*</span></a>.jpg&#8217;
&gt;&gt;&gt; samples = [(1, &#8216;nut_color&#8217;), (2, &#8216;nut_grayscale&#8217;)]
&gt;&gt;&gt; read_image = ReadImage(1, imagepath)
&gt;&gt;&gt; samples &gt;&gt; read_image &gt;&gt; ViewImage(1) &gt;&gt; Consume() # doctest: +SKIP</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>imgcols</strong> (<em>int|tuple</em>) &#8211; Index or tuple of indices of data columns
containing images (ndarray)</li>
<li><strong>layout</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) &#8211; Rows and columns of the viewer layout., e.g.
a layout of (2,3) means that 6 images in the data are
arranged in 2 rows and 3 columns.
Number of cols can be None is then derived from imgcols</li>
<li><strong>figsize</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) &#8211; Figure size in inch.</li>
<li><strong>pause</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Waiting time in seconds after each plot.
Pressing a key skips the waiting time.</li>
<li><strong>imargs</strong> (<em>kwargs</em>) &#8211; Keyword arguments passed on to matplotlib&#8217;s
imshow() function. See
<a class="reference external" href="http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.imshow">http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.imshow</a></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="nutsml.viewer.ViewImageAnnotation">
<em class="property">class </em><code class="descname">ViewImageAnnotation</code><span class="sig-paren">(</span><em>imgcol</em>, <em>annocols</em>, <em>figsize=None</em>, <em>pause=0.0001</em>, <em>interpolation=None</em>, <em>**annoargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/viewer.html#ViewImageAnnotation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.viewer.ViewImageAnnotation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">nutsflow.base.NutFunction</span></code></p>
<p>Display images and annotation in window.</p>
<dl class="method">
<dt id="nutsml.viewer.ViewImageAnnotation.__call__">
<code class="descname">__call__</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/viewer.html#ViewImageAnnotation.__call__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.viewer.ViewImageAnnotation.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>View the image and its annotation</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) &#8211; Data with image at imgcol and annotation at annocol.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">unchanged input data</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)">tuple</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nutsml.viewer.ViewImageAnnotation.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>imgcol</em>, <em>annocols</em>, <em>figsize=None</em>, <em>pause=0.0001</em>, <em>interpolation=None</em>, <em>**annoargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/viewer.html#ViewImageAnnotation.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.viewer.ViewImageAnnotation.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>iterable &gt;&gt; ViewImageAnnotation(imgcol, annocols, figsize=None,</dt>
<dd>pause, interpolation, <a href="#id5"><span class="problematic" id="id6">**</span></a>annoargs)</dd>
</dl>
<p>Images must be numpy arrays in one of the following formats:
MxN - luminance (grayscale, float array only)
MxNx3 - RGB (float or uint8 array)
MxNx4 - RGBA (float or uint8 array)
See
<a class="reference external" href="http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.imshow">http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.imshow</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>imgcol</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Index of data column that contains the image</li>
<li><strong>annocols</strong> (<em>int|tuple</em>) &#8211; Index or tuple of indices specifying the data
column(s) that contain annotation (labels, or geometry)</li>
<li><strong>figsize</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) &#8211; Figure size in inch.</li>
<li><strong>pause</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Waiting time in seconds after each plot.
Pressing a key skips the waiting time.</li>
<li><strong>interpolation</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) &#8211; Interpolation for imshow, e.g.
&#8216;nearest&#8217;, &#8216;bilinear&#8217;, &#8216;bicubic&#8217;. for details see
<a class="reference external" href="http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.imshow">http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.imshow</a></li>
<li><strong>annoargs</strong> (<em>kwargs</em>) &#8211; Keyword arguments for visual properties of
annotation, e.g.  edgecolor=&#8217;y&#8217;, linewidth=1</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-nutsml.writer">
<span id="nutsml-writer-module"></span><h2>nutsml.writer module<a class="headerlink" href="#module-nutsml.writer" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-writer"></span><dl class="class">
<dt id="nutsml.writer.WriteImage">
<em class="property">class </em><code class="descname">WriteImage</code><span class="sig-paren">(</span><em>column</em>, <em>pathfunc</em>, <em>names=&lt;nutsflow.factory.Wrapper object at 0x000000000B178898&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/writer.html#WriteImage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.writer.WriteImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">nutsflow.base.NutFunction</span></code></p>
<p>Write images within samples.</p>
<dl class="method">
<dt id="nutsml.writer.WriteImage.__call__">
<code class="descname">__call__</code><span class="sig-paren">(</span><em>sample</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/writer.html#WriteImage.__call__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.writer.WriteImage.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return sample and write image within sample</p>
</dd></dl>

<dl class="method">
<dt id="nutsml.writer.WriteImage.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>column</em>, <em>pathfunc</em>, <em>names=&lt;nutsflow.factory.Wrapper object at 0x000000000B178898&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nutsml/writer.html#WriteImage.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nutsml.writer.WriteImage.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Write images within samples to file.</p>
<p>Writes jpg, gif, png, tif and bmp format depending on file extension.
Images in samples are expected to be numpy arrays.
See nutsml.util.load_image for details.</p>
<p>Folders on output file path are created if missing.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nutsml</span> <span class="k">import</span> <span class="n">ReadImage</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nutsflow</span> <span class="k">import</span> <span class="n">Collect</span><span class="p">,</span> <span class="n">Get</span><span class="p">,</span> <span class="n">Consume</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">samples</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;nut_color&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;nut_grayscale&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inpath</span> <span class="o">=</span> <span class="s1">&#39;tests/data/img_formats/*.bmp&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img_samples</span> <span class="o">=</span> <span class="n">samples</span> <span class="o">&gt;&gt;</span> <span class="n">ReadImage</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">inpath</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">Collect</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">imagepath</span> <span class="o">=</span> <span class="s1">&#39;tests/data/test_*.bmp&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">names</span> <span class="o">=</span> <span class="n">samples</span> <span class="o">&gt;&gt;</span> <span class="n">Get</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">Collect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img_samples</span> <span class="o">&gt;&gt;</span> <span class="n">WriteImage</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">imagepath</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">Consume</span><span class="p">()</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>column</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Column in sample that contains image.</li>
<li><strong>pathfunc</strong> (<em>str|function</em>) &#8211; Filepath with wildcard &#8216;*&#8217;,
which is replaced by the name provided names e.g.
&#8216;tests/data/img_formats/<a href="#id7"><span class="problematic" id="id8">*</span></a>.jpg&#8217; for names = [&#8216;nut_grayscale&#8217;]
will become &#8216;tests/data/img_formats/nut_grayscale.jpg&#8217;
or
Function to compute path to image file from sample and name, e.g.
pathfunc = lambda sample, name: &#8216;tests/data/test_{}.jpg&#8217;.format(name)</li>
<li><strong>names</strong> (<em>iterable</em>) &#8211; Iterable over names to generate image paths from.
Length need to be the same as samples.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-nutsml">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-nutsml" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">nutsml package</a><ul>
<li><a class="reference internal" href="#subpackages">Subpackages</a></li>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-nutsml.batcher">nutsml.batcher module</a></li>
<li><a class="reference internal" href="#module-nutsml.booster">nutsml.booster module</a></li>
<li><a class="reference internal" href="#module-nutsml.common">nutsml.common module</a></li>
<li><a class="reference internal" href="#module-nutsml.config">nutsml.config module</a></li>
<li><a class="reference internal" href="#module-nutsml.datautil">nutsml.datautil module</a></li>
<li><a class="reference internal" href="#module-nutsml.imageutil">nutsml.imageutil module</a></li>
<li><a class="reference internal" href="#module-nutsml.logger">nutsml.logger module</a></li>
<li><a class="reference internal" href="#module-nutsml.network">nutsml.network module</a></li>
<li><a class="reference internal" href="#module-nutsml.plotter">nutsml.plotter module</a></li>
<li><a class="reference internal" href="#module-nutsml.reader">nutsml.reader module</a></li>
<li><a class="reference internal" href="#module-nutsml.stratify">nutsml.stratify module</a></li>
<li><a class="reference internal" href="#module-nutsml.transformer">nutsml.transformer module</a></li>
<li><a class="reference internal" href="#module-nutsml.viewer">nutsml.viewer module</a></li>
<li><a class="reference internal" href="#module-nutsml.writer">nutsml.writer module</a></li>
<li><a class="reference internal" href="#module-nutsml">Module contents</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="tutorial/configuration.html" title="previous chapter">Configuration</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/nutsml.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, IBM.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/nutsml.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>